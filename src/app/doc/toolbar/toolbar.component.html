<mat-toolbar color="primary" class="mat-elevation-z6">
  <div fxFill fxLayoutAlign="space-between">
    <div fxLayoutAlign="start center">
      <button mat-icon-button (click)="menu.emit()">
        <mat-icon>menu</mat-icon>
      </button>

      <div class="title">
        <mat-form-field ngClass.gt-xs="gt-xs" color="accent">
          <input #input matInput [value]="doc.title" (keydown)="updateTitle($event)" (blur)="updateTitle($event)" (focus)="selectTitle()"
          />
        </mat-form-field>
      </div>
    </div>

    <div fxLayoutAlign="end center">
      <mute-sync class="sync action"></mute-sync>
      <button mat-icon-button class="action" [matMenuTriggerFor]="docMenu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <button mat-icon-button class="action" (click)="info.emit()">
        <mat-icon>info</mat-icon>
      </button>
      <mute-profile class="action profile"></mute-profile>
    </div>
  </div>
</mat-toolbar>

<mat-menu #docMenu="matMenu" overlapTrigger="false">
  <button disabled mat-menu-item [routerLink]="['/history', doc.signalingKey]">
    <mat-icon>history</mat-icon>
    Version history
  </button>
  <button mat-menu-item (click)="inviteBot()" [disabled]="botNotAvailable">
    <mat-icon>cloud</mat-icon>
    Invite bot storage
  </button>
  <!--FIXME: *ngIf didn't work here, fxShow doesn't work with ng-container-->
  <mat-divider fxShow="debug === true"></mat-divider>
  <button fxShow="debug === true" mat-menu-item [matMenuTriggerFor]="debug">
    <mat-icon>bug_report</mat-icon>
    Debug
  </button>
</mat-menu>

<mat-menu #debug="matMenu">
  <button mat-menu-item (click)="downloadMuteLog($event)">Download MUTE logs</button>
  <button mat-menu-item (click)="downloadDocLog($event)">Download doc logs</button>
  <button mat-menu-item (click)="downloadDocTree($event)">Download doc tree</button>
  <mat-divider></mat-divider>
  <mat-slide-toggle (click)="netfluxLog($event)" class="log-slider">Netflux logs</mat-slide-toggle><br/>
  <mat-slide-toggle (click)="cryptoLog($event)" class="log-slider">Cryptography logs</mat-slide-toggle><br/>
  <mat-slide-toggle (click)="docLog($event)" class="log-slider">Document logs</mat-slide-toggle><br/>
</mat-menu>

<a #debugDownload class="debug-download"></a>
