<div fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="1.3rem">
  <h1 class="logo"><a routerLink="/">MUTE</a></h1>
  <button fxFlexAlign="center" class='btn' mat-raised-button color="accent"
    [matMenuTriggerFor]="newDocMenu">
    New Document
  </button>

  <mat-menu #newDocMenu="matMenu">
    <button mat-menu-item (click)="createDoc()">
      <span class="new-doc-icons"><mat-icon>computer</mat-icon></span>
      <span>Locally</span>
    </button>
    <button *ngIf="!this.remoteErrorMessage" mat-menu-item (click)="createDoc(true)">
      <span class="new-doc-icons">
        <mat-icon>computer</mat-icon>
        <mat-icon>cloud</mat-icon>
      </span>
      <span>Locally & Remotely</span>
    </button>
    <button mat-menu-item>
      <span class="new-doc-icons"><mat-icon>group_work</mat-icon></span>
      <span>Join by key</span>
    </button>
  </mat-menu>

  <div fxLayout="column" fxLayoutAlign="start stretch" class="buttons">

    <!-- Local storage -->
    <button mat-button [disabled]="localErrorMessage"
      [ngClass]="{'active': selected === local && !localErrorMessage}" (click)="openFolder(local)">
      <mat-icon [color]="selected === local && !localErrorMessage ? 'primary' : ''">{{local.icon}}</mat-icon>{{local.title}}
    </button>

    <!-- Trash -->
    <button mat-button [disabled]="localErrorMessage"
      [ngClass]="{'active': selected === trash && !localErrorMessage}" (click)="openFolder(trash)">
      <mat-icon [color]="selected === trash && !localErrorMessage ? 'primary' : ''">{{trash.icon}}</mat-icon>{{trash.title}}
    </button>

    <!-- Local storage quota -->
    <ng-container *ngIf="!localErrorMessage else localDisabled">
      <div *ngIf="isStorageManagerAvailable">
        <div class="mat-caption hint">{{usage | muteSize}} of {{quota | muteSize}} used</div>
      </div>
    </ng-container>
    <ng-template #localDisabled>
      <span *ngIf="localErrorMessage" class="mat-caption hint">{{localErrorMessage}}</span>
    </ng-template>
    <mat-divider></mat-divider>


    <ng-container *ngIf="isRemoteExist">
      <!-- Remote storage -->
      <button mat-button [ngClass]="{'active': selected === remote}"
        [disabled]="remoteErrorMessage"
        (click)="openFolder(remote)">
        <mat-icon [color]="selected === remote ? 'primary' : ''">{{remote.icon}}</mat-icon>{{remote.title}}
      </button>
      <span *ngIf="remoteErrorMessage" class="mat-caption hint">{{remoteErrorMessage}}</span>

      <mat-divider></mat-divider>
    </ng-container>

    <!-- Settings -->
    <button mat-button (click)="openSettingsDialog()">
      <mat-icon>settings</mat-icon>Settings
    </button>

  </div>

</div>
